
<dialog id="course-dialog" class="p-6 space-y-4 rounded-xl shadow-lg sm:max-w-[30rem]">
    <div class="course-dialog-header rounded-t space-y-1">
        <h1 class="text-lg font-semibold">Course Details</h1>
        <p class="text-xs opacity-60">F2F: Face-to-face  |  BLD: Blended  |  OL: Online</p>
    </div>
    <div class="course-dialog-content flex flex-col items-center sm:flex-row gap-4">
        <div class="pr-4 sm:border-r w-full space-y-2">
            <p><span class="font-semibold">Code: </span><span id="course-code"></span></p>
            <p><span class="font-semibold">Name: </span><span id="course-name"></span></p>
            <p><span class="font-semibold">Credit Hours: </span><span id="course-credits"></span> Cr.</p>
            <p><span class="font-semibold">ECTS: </span><span id="course-ects"></span> Cr.</p>
            <p><span class="font-semibold">Teaching Method: </span><span id="course-type"></span></p>
        </div>

        <table class="rounded-lg w-full sm:w-fit">
            <tr>
                <th colspan="2" class="font-semibold bg-gray-200 rounded-t-lg p-2">Contact Hours</th>
            </tr>
            <tr>
                <th class="pt-2 px-2 font-normal">Lecture</th>
                <th class="pt-2 px-2 font-normal">Practical</th>
            </tr>
            <tr class="text-center">
                <td id="course-lecture" class="p-2"></td>
                <td id="course-practical"></td>
            </tr>
            <tr>
                <td colspan="2" class="text-center border-t p-2">
                    <span class="font-semibold">Total: <br/></span>
                    <span id="course-total"></span> Hrs/Week
                </td>
            </tr>
        </table>
    </div>
    <div id="course-dialog-close" class="absolute top-0 right-5 hover:text-gray-500 transition-all hover:scale-110 cursor-pointer">
        <i data-lucide="X" />
    </div>
</dialog>

<script>
    import type { Course } from "../types";

    const dialog = document.getElementById('course-dialog') as HTMLDialogElement;

    declare global {
        interface Window {
            showCourseDialog: (course: Course) => void;
        }
    }

    function showCourseDialog(course: any) {
        const content = dialog.querySelector('.course-dialog-content') as HTMLElement;

        content.querySelector('#course-code')!.textContent = course.code;
        content.querySelector('#course-name')!.textContent = course.name;
        content.querySelector('#course-credits')!.textContent = course.creditHours;
        content.querySelector('#course-ects')!.textContent = course.ects;
        content.querySelector('#course-type')!.textContent = course.type;
        content.querySelector('#course-lecture')!.textContent = `${course.lectureHours} Hr.`;
        content.querySelector('#course-practical')!.textContent = `${course.practicalHours} Hr.`;
        content.querySelector('#course-total')!.textContent = course.lectureHours + course.practicalHours;

        dialog.showModal();
    }

    window.showCourseDialog = showCourseDialog;

    dialog.querySelector('#course-dialog-close')?.addEventListener('click', () => {
        dialog.close();
    });

</script>